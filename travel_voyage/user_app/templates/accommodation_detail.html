{% include "header.html" %}
{% load static %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="{% static 'css/accomodation_details.css' %}">

<div class="container py-5">
    <div class="row">
        <!-- Accommodation Details (Left Side) -->
        <div class="col-lg-8 d-flex">
            <!-- Carousel for images -->
            <div class="carousel-container flex-shrink-0" style="width: 50%; margin-right: 20px;">
                <div id="accommodationCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner" style="height: 400px;">
                        {% for image in accommodation.images.all %}
                        <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <img src="{{ image.image.url }}" class="d-block w-100 rounded shadow-sm" alt="{{ accommodation.name }}">
                        </div>
                        {% empty %}
                        <div class="carousel-item active" style="height: 100px;">
                            <img src="{% static 'images/accommodation-placeholder.jpg' %}" class="d-block w-100 rounded shadow-sm" alt="Placeholder" height="400px">
                        </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#accommodationCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#accommodationCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>

            <!-- Accommodation Details (Right Side) -->
            <div class="accommodation-details bg-white p-4 rounded shadow-sm mb-4" style="width: 50%;">
                <h1 class="text-primary mb-3">{{ accommodation.name }}</h1>
                <p class="text-muted">{{ accommodation.description }}</p>

                <ul class="list-unstyled mt-4">
                    <li><strong>Price per Night:</strong> <span class="text-primary">${{ accommodation.price_per_night }}</span></li>
                    <li><strong>Amenities:</strong> {{ accommodation.amenities }}</li>
                    <li><strong>Contact:</strong> {{ accommodation.contact_number }}</li>
                    <li><strong>Address:</strong> {{ accommodation.address }}</li>
                    {% if user.is_authenticated %}
                    <a href="{% url 'booking_page' accommodation.id %}" class="btn btn-primary mt-3">Reserve Now</a>
                    {% else %}
                    <a href="{% url 'login' %}" class="btn btn-warning mt-3">Please Login to Reserve</a>
                    {% endif %}
                </ul>
            </div>
        </div>

        <!-- Right Side: Destination Details & Nearby Activities -->
        <div class="col-lg-4">
            <section class="destination-details bg-light p-4 rounded shadow-sm mb-4">
                <h2 class="text-dark">Destination: {{ destination.place }}</h2>
                <p class="text-muted">{{ destination.description }}</p>
            </section>

            <!-- Activities Nearby -->
            <section class="nearby-activities bg-white p-4 rounded shadow-sm">
                <h3 class="text-dark mb-3">Nearby Activities</h3>
                {% for activity in activities %}
                <div class="activity-item mb-4">
                    <h4 class="h5 text-primary">{{ activity.spot_name }}</h4>
                    <p class="text-muted">{{ activity.description|truncatewords:15 }}</p>
                    <a href="{% url 'activity_detail' activity.id %}" class="btn btn-secondary btn-sm">View Details</a>
                </div>
                {% endfor %}
            </section>
        </div>
    </div>
</div>

{% include "footer.html" %}
